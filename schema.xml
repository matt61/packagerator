<?xml version="1.0" encoding="utf-8"?>
<database name="default" defaultIdMethod="native" defaultPhpNamingMethod="underscore" namespace="Packagerator\Model">
    <vendor type="mysql">
        <parameter name="Engine" value="InnoDB"/>
    </vendor>
    <table name="package" idMethod="native">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="VARCHAR" size="50" required="true"/>
        <unique>
            <unique-column name="name"/>
            <unique-column name="version"/>
        </unique>
        <behavior name="versionable" />
    </table>
    <table name="package_dependancy">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_id" type="INTEGER" required="true"/>
        <column name="required_package_id" type="INTEGER" required="true"/>
        <foreign-key foreignTable="package">
            <reference local="package_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="package" phpName="RequiredPackage">
            <reference local="required_package_id" foreign="id"/>
        </foreign-key>
        <behavior name="versionable" />
    </table>
    <table name="artifact_type">
        <column name="id" type="INTEGER" primaryKey="true" required="true"/>
        <column name="name" type="VARCHAR" size="50" required="true"/>
        <unique>
            <unique-column name="name"/>
        </unique>
    </table>
    <table name="package_dependancy_artifact">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_id" type="INTEGER" required="true"/>
        <column name="name" type="VARCHAR" size="50" required="true"/>
        <column name="checksum" type="VARCHAR" size="50" required="true"/>
        <column name="artifact_type_id" type="INTEGER" required="true"/>
        <column name="artifact_path" type="VARCHAR" size="150" required="true"/>
        <foreign-key foreignTable="package">
            <reference local="package_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="artifact_type">
            <reference local="artifact_type_id" foreign="id"/>
        </foreign-key>
        <unique>
            <unique-column name="name"/>
            <unique-column name="version"/>
            <unique-column name="package_id"/>
        </unique>
        <behavior name="versionable" />
    </table>
    <table name="property_type">
        <column name="id" type="VARCHAR" size="50" primaryKey="true" required="true"/>
        <column name="name" type="VARCHAR" size="50"/>
        <unique>
            <unique-column name="name"/>
        </unique>
    </table>
    <table name="package_step_property">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_step_id" type="INTEGER"/>
        <column name="property_type_id" type="VARCHAR" size="50"/>
        <unique>
            <unique-column name="package_step_id"/>
            <unique-column name="version"/>
            <unique-column name="property_type_id"/>
        </unique>
        <foreign-key foreignTable="package_step">
            <reference local="package_step_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="property_type" onDelete="restrict">
            <reference local="property_type_id" foreign="id"/>
        </foreign-key>
        <behavior name="versionable" />
    </table>
    <table name="package_permission" idMethod="native" phpName="PackagePermission">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_id" phpName="PackageId" type="INTEGER"/>
        <column name="user_group_id" phpName="UserGroupId" type="INTEGER"/>
    </table>
    <table name="package_role" idMethod="native" phpName="PackageRole">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_id" phpName="PackageId" type="INTEGER"/>
        <column name="role_id" phpName="RoleId" type="INTEGER"/>
    </table>
    <table name="package_step">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_id" type="INTEGER" required="true"/>
        <column name="name" type="VARCHAR" size="50" required="true"/>
        <column name="package_step_type_id" type="INTEGER" required="true"/>
        <column name="related_package_id" type="INTEGER"/>
        <behavior name="versionable" />
        <behavior name="sortable">
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="package_id" />
        </behavior>
        <unique>
            <unique-column name="package_id"/>
            <unique-column name="sortable_rank"/>
            <unique-column name="version"/>
        </unique>
        <unique>
            <unique-column name="package_id"/>
            <unique-column name="name"/>
            <unique-column name="version"/>
        </unique>
        <foreign-key foreignTable="package" phpName="Package" refPhpName="Step">
            <reference local="package_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="package_step_type">
            <reference local="package_step_type_id" foreign="id"/>
        </foreign-key>
        <foreign-key foreignTable="package" phpName="RelatedPackage">
            <reference local="related_package_id" foreign="id"/>
        </foreign-key>
    </table>
    <table name="package_step_type">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="name" type="VARCHAR" size="250" required="true"/>
        <unique>
            <unique-column name="name"/>
        </unique>
    </table>
    <table name="package_step_execution">
        <column name="id" type="INTEGER" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="package_step_id" type="INTEGER" required="true"/>
        <column name="input" type="VARCHAR" size="250" required="true"/>
        <column name="output_code" type="INTEGER"/>
        <column name="output_pattern" type="VARCHAR" size="250"/>
        <foreign-key foreignTable="package_step">
            <reference local="package_step_id" foreign="id"/>
        </foreign-key>
        <behavior name="sortable">
            <parameter name="use_scope" value="true" />
            <parameter name="scope_column" value="package_id" />
        </behavior>
        <unique>
            <unique-column name="package_step_id"/>
            <unique-column name="sortable_rank"/>
            <unique-column name="version"/>
        </unique>
        <behavior name="versionable"/>
    </table>
    <table name="property" idMethod="native" phpName="Property">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true" required="true"/>
        <column name="property_type_id" phpName="PropertyTypeId" type="INTEGER"/>
        <column name="value" phpName="Value" type="VARCHAR" size="50"/>
        <column name="version_id" phpName="VersionId" type="INTEGER"/>
        <column name="property_group_id" phpName="PropertyGroupId" type="INTEGER"/>
    </table>
    <table name="property_group" idMethod="native" phpName="PropertyGroup">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="name" phpName="Name" type="VARCHAR" size="50"/>
        <column name="version_id" phpName="VersionId" type="INTEGER"/>
    </table>
    <table name="property_group_permission" idMethod="native" phpName="PropertyGroupPermission">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="property_group_id" phpName="PropertyGroupId" type="INTEGER"/>
        <column name="user_group_id" phpName="UserGroupId" type="INTEGER"/>
    </table>
    <table name="property_group_role" idMethod="native" phpName="PropertyGroupRole">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="property_group_id" phpName="PropertyGroupId" type="INTEGER"/>
        <column name="role_id" phpName="RoleId" type="INTEGER"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="role" idMethod="native" phpName="Role">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target" idMethod="native" phpName="Target">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="name" phpName="Name" type="VARCHAR" size="50"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target_group" idMethod="native" phpName="TargetGroup">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="name" phpName="Name" type="VARCHAR" size="50"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target_group_membership" idMethod="native" phpName="TargetGroupMembership">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="deployment_group_id" phpName="DeploymentGroupId" type="INTEGER" required="true"/>
        <column name="deployment_target_id" phpName="DeploymentTargetId" type="INTEGER" required="true"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target_group_permission" idMethod="native" phpName="TargetGroupPermission">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="target_group_id" phpName="TargetGroupId" type="INTEGER"/>
        <column name="user_group_id" phpName="UserGroupId" type="INTEGER"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target_package_status" idMethod="native" phpName="TargetPackageStatus">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="name" phpName="Name" type="VARCHAR" size="50"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="target_role" idMethod="native" phpName="TargetRole">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="target_id" phpName="TargetId" type="INTEGER"/>
        <column name="role_id" phpName="RoleId" type="INTEGER"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="user" idMethod="native" phpName="User">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="email" phpName="Email" type="VARCHAR" size="11"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="user_group" idMethod="native" phpName="UserGroup">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="name" phpName="Name" type="VARCHAR" size="50"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
    <table name="user_group_membership" idMethod="native" phpName="UserGroupMembership">
        <column name="id" phpName="Id" type="INTEGER" sqlType="int(11) unsigned" primaryKey="true" autoIncrement="true"
                required="true"/>
        <column name="user_group_id" phpName="UserGroupId" type="INTEGER"/>
        <column name="user_id" phpName="UserId" type="INTEGER"/>
        <vendor type="mysql">
            <parameter name="Engine" value="InnoDB"/>
        </vendor>
    </table>
</database>